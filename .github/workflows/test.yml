name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: shogo82148/actions-setup-perl@v1
      with:
        perl-version: '5.30'
    - name: Requirements
      run: cpanm --installdeps .
    - name: Build
      run: |
        perl Build.PL
        ./Build
    - name: Test
      run: ./Build test
    - name: Prove
      run: prove -lv t
    - name: Test All
      run: ./Build testall
    - name: install
      run: ./Build install
    - name: Dist Test
      run: ./Build disttest
    - name: Dist Build
      run: ./Build dist
    - name: Dist Sign
      run: ./Build distdistsign
